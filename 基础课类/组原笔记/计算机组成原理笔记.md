# PART1- 计算机组成基础

## 计算机层次结构

### 冯诺依曼机的组成

- 输入输出（I/O设备）
- 存储器
- 运算器
- 控制器

### 早期冯诺依曼结构

![image-20220114215122307](F:\MDNotes\_Images\image-20220114215122307.png)

**特点**: 以运算器为核心，一切输入输出都需要经过运算器，拉低了运算器的效率

### 现代冯诺依曼结构

![image-20220114215317346](F:\MDNotes\_Images\image-20220114215317346.png)

**特点**: 改为以存储器为中心（联想单片机中的IO口，大多有一个寄存器可以直接存储，而不是通过ALU中转再存入存储中）

## 计算机硬件工作原理

### 存储器（内存）

<img src="F:\MDNotes\_Images\image-20220114215859231.png" alt="image-20220114215859231" style="zoom: 50%;" />

内存结构如上图所示，由存储体、地址寄存器、数据寄存器构成

中央控制器利用总线与内存取得联系后，会给出读/写指令，并在MAR中写入数据的地址（MAR会通过地址矩阵总线访问到存储体中的确定位置，并打开它的读/写允许，MDR将得到其中的数据或将数据写入存储体中），在MDR中取或输入需要存的数据。



### 运算器

​	<img src="F:\MDNotes\_Images\image-20220114220535292.png" alt="image-20220114220535292"  />

运算器由多个辅助寄存器加上ALU（算数逻辑单元构成）

- **ACC寄存器**基本上用于记录"被"计算的数和计算后的结果

- **X寄存器**基本上用于记录"用于运算的数"

- **MQ寄存器**基本上用于辅助记录结果，但在乘法中，还用于记录乘数

	

### 控制器

![image-20220114221548337](F:\MDNotes\_Images\image-20220114221548337.png)

控制器结构如图所示：其中IR用于存放指令，PC用于读取下一条指令，CU用于分析、执行指令

### 计算机工作流程

<img src="F:\MDNotes\_Images\image-20220114221813083.png" alt="image-20220114221813083" style="zoom:150%;" />

主要分为3大部分

#### 取指令

- PC寄存器将值写入MAR寄存器
- MAR寻址，将结果存入MDR寄存器（MDR的值为完整指令，分为操作部分与地址部分）
- IR接收MDR传递的指令，并将指令分为操作码与地址码

#### 解析指令

- IR将操作码传给CU（Control Unit 控制单元），CU解析指令

#### 执行指令

- IR将地址码写入MAR
- MAR寻址，将值写入MDR
- CU根据操作码完成剩余的指令（如将MDR中的值进行运算、操作ALU运算等）

## 计算机层次结构

![image-20220114223625104](F:\MDNotes\_Images\image-20220114223625104.png)

![image-20220114223804929](F:\MDNotes\_Images\image-20220114223804929.png)

# PART2- 计算机中的数据

## 数制

常见的数制有：十进制（DEC），十二进制（HEX），八进制，二进制等

需要掌握二进制与八进制、十二进制之间的关系

## BCD码

### 什么是BCD码？

BCD码，即binary-coded decimal，二进制编码十进制。 

使用4位二进制来表示1位十进制，由于4位二进制可以表示0~15共十六个数，所以会有部分编码是无效的

### 常见的BCD码

#### 8421码

4bit二进制分别代表8、4、2、1十进制

超过1001的值都为无效值

#### 余三码

由8421码加3（0011）表示，每一位没有固定权重

### BCD码的运算

如果运算结果有效，则直接运算

如果运算结果落入无效编码区间，则运算结果加6（0110）即为正确结果

tips：用能表示0 ~ 15的编码表示 0 ~ 9，一定会有6种情况冗余，因此要加6，使得结果落入有效区间内

## 校验码

### 校验原理

几个重要概念

**码距**：一个编码方案中，合法码字间的最小距离（即最相近的两个编码需要改变多少位）

**若码距==2，则具备检错能力；若码距>=3，则还可能具备纠错能力**

### 奇偶校验码

#### 奇偶校验原理

空出一位作为校验位，在其填入的值应使编码中1的个数为奇数/偶数

**tip : 奇偶校验只校验1的个数，奇偶是1的个数的奇偶**

#### 奇偶校验方式

在计算机中，对采取奇偶校验的编码的每一位进行异或运算，最后的值即为奇偶校验的结果

如果是奇校验，那么最终运算的结果如果是1，则为正确

如果是偶校验，最终运算结果为0则代表编码正确

### 海明码

海明码通过奇偶校验方式，对整个数据进行分组校验，可以确定：

- 一个错误的位置
- 识别多个错误

#### 海明码校验原理

在数据的第$2^n$位加入校验码，则可以通过二进制的二分规律，识别对应的块，并进行奇偶校验

这样即可通过不同组的交集，识别出错误的位



## 定点数的表示与运算

定点数，即小数点位数确定在某一位置的数，可以分为

- 定点整数
- 定点小数

### 定点数的表示

- 第一位一般作为**符号位**，0表示正，1表示负
- 定点小数默认小数点紧跟在符号位背后
- 定点整数默认小数点位于数值最末尾

### 定点数的编码运算

|      |      正数      |            负数            |
| :--: | :------------: | :------------------------: |
| 原码 |   定点数本身   |         定点数本身         |
| 反码 |   定点数本身   | 除符号位外，所有位按位取反 |
| 补码 |   定点数本身   |     原码转为反码后 加1     |
| 移码 | 补码符号位取反 |       补码符号位取反       |

**定点数的运算原理**

- 如果所有运算都使用原码，那么导致需要特殊设计减法器来处理带符号运算
- 利用余数原理，如仅表示0~9的数，8-3可以表示为(8+(10-3))mod10 = 5
- 则一正一负，绝对值和为最大表示范围的数为互补数，如上一点中的 -3和7（10-3）
- 计算机中所能存的最大数是恒定的，上溢相当于取余，因此可以利用这一原理来处理负数加法
- 补码就是负数的互补数的二进制表示
- 因此计算机中的运算都利用补码进行